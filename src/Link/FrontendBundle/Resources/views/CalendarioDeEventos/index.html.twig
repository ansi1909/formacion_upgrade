{% extends '::base.html.twig'%}

{% block stylesheets %}
    {{ parent() }}
    <!-- Full calendar css -->
    <link rel="stylesheet" href="{{ asset('assets/vendor/fullcalendar/fullcalendar.css') }}" type="text/css">
    <link rel="stylesheet" href="{{ asset('assets/vendor/fullcalendar/fullcalendar.print.css') }}" type="text/css"  media="print">
    <link rel="stylesheet" href="{{ asset('jq/datetimepicker/bootstrap-datetimepicker.min.css') }}" type="text/css">
    <style type="text/css">
      .fc button{
        height: 100%;
      }
      .fc-toolbar .fc-state-active, .fc-toolbar .ui-state-active {
        color: #ffffff !important;
        background: #00558D;
        background: -moz-linear-gradient(left, #0084db 0%, #00558D 100%);
        background: -webkit-linear-gradient(left, #0084db 0%, #00558D 100%);
        background: linear-gradient(to right, #0084db 0%, #00558D 100%);
        color: black;
        color: #ffffff;
        border-bottom: 2px solid #A3C300
      }
      .fc-center h2{
        font-size: 25px;
        font-weight: 500;
        text-transform: capitalize;
      }
      .wrapper-content{
        position: inherit !important;
      }
    </style>
{% endblock %}

{% block body %}
{% set uri = app.request.getbasepath %}
<br>
<br>
<div class="row">
    <div class="col-sm-16 col-md-16 col-lg-16 col-xl-16">
      <div id='calendar'></div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="Modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header" style="background: linear-gradient(to right, #0084db 0%, #00558D 100%); color: #fff;">
                        <h5 class="modal-title" id="exampleModalLongTitle">{{'Datos Evento'|trans}}</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true" style="color: #fff;">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="container">
                        <div class="row justify-content-between">
                            <div class="col-sm-16 col-md-16 show__details">
                                <h5>{{ 'Título'|trans }}:</h5>
                                <p id="p-titulo"></p>
                            </div>
                        </div>
                        <br>
                        <div class="row justify-content-between">
                            <div class="col-sm-16 col-md-16 show__details">
                                <h5>{{'Fecha inicio'| trans}}</h5>
                                <p id="p-fechainicio"></p>
                            </div>
                        </div>
                        <br>
                        <div class="row justify-content-between">
                            <div class="col-sm-16 col-md-16 show__details">
                                <h5>{{'Fecha fin'| trans}}</h5>
                                <p id="p-fechafin"></p>
                            </div>
                        </div>
                        <br>
                        <div class="row justify-content-between">
                            <div class="col-sm-16 col-md-16 show__details">
                                <h5>{{'Descripción'| trans}}</h5>
                                <p id="p-descripcion"></p>
                            </div>
                        </div>
                        <br>
                        <div class="row justify-content-between">
                            <div class="col-sm-16 col-md-16 show__details">
                                <h5>{{'Lugar'| trans}}</h5>
                                <p id="p-lugar"></p>
                            </div>
                        </div>
                        <br>
                        <div class="row justify-content-between">
                            <div class="col-sm-16 col-md-16 show__details">
                                <h5>{{'Nivel'| trans}}</h5>
                                <p id="p-nivel"></p>
                            </div>
                        </div>
                        <br>
                    </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="bttn__cancel" data-dismiss="modal" id="cancelar_save_update"><span class="text__cancel">{{ 'Cancelar'|trans }}</span><span class="fa fa-times"></span></button>
                    </div>
                </div>
            </div>
        </div>
</div>

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="{{ asset('assets/vendor/cicular_progress/circle-progress.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('assets/vendor/sparklines/jquery.sparkline.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('assets/vendor/fullcalendar/lib/moment.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('assets/vendor/fullcalendar/fullcalendar.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('assets/vendor/fullcalendar/locale/es.js') }}"></script>
    <script type="text/javascript" src="{{ asset('assets/js/calendar.js') }}"></script>
    <script type="text/javascript" src="{{ asset('jq/jquery-validation-1.15.0/dist/jquery.validate.js') }}"></script>
    <script type="text/javascript" src="{{ asset('jq/datetimepicker/bootstrap-datetimepicker.js') }}"></script>
    <script type="text/javascript" src="{{ asset('jq/datetimepicker/bootstrap-datetimepicker.es.js') }}"></script>
    <script type="text/javascript">
       $(document).ready(function() {
           var date = new Date();
           var yyyy = date.getFullYear().toString();
           var mm = (date.getMonth()+1).toString().length == 1 ? "0"+(date.getMonth()+1).toString() : (date.getMonth()+1).toString();
           var dd  = (date.getDate()).toString().length == 1 ? "0"+(date.getDate()).toString() : (date.getDate()).toString();
            
            $('#calendar').fullCalendar({
                header: {
                    language: 'es',
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,basicWeek,basicDay',

                },
                defaultDate: yyyy+"-"+mm+"-"+dd,
                editable: false,
                eventLimit: true, // allow "more" link when too many events
                selectable: false,
                selectHelper: true,
                eventRender: function(event, element) {
                    element.bind('click', function() {
                        var eve_id = event.id;
                        var comienzo = $.fullCalendar.formatDate(event.start, 'DD-MM-YYYY hh:mm a');
                        var final = event.end ? $.fullCalendar.formatDate(event.end, 'DD-MM-YYYY hh:mm a') : '';
                        $('#Modal #p-titulo').html(event.title);
                        $('#Modal #p-fechainicio').html(comienzo);
                        $('#Modal #p-fechafin').html(final);
                        $('#Modal #p-descripcion').html(event.descripcion);
                        $('#Modal #p-lugar').html(event.lugar);
                        $('#Modal #p-nivel').html(event.nivel);
                        $('#Modal').modal('show');
                    });
                },
                events: "{{ path('_eventosDelUsuario', { 'userID': usuario_id }) }}",
                timeFormat: 'hh:mm a'
            });
        });
    </script>
    
{% endblock %}