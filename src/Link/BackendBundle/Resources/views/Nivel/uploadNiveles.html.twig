{% extends '::admin.html.twig' %}

{% block body %}

<input type="hidden" id="url_list" name="url_list" value="{{ path('_empresasNiveles', { 'app_id': app.session.get('app_id') }) }}">
<input type="hidden" id="url_tree" name="url_tree" value="{{ path('_ajaxTreeNiveles') }}">
<br>
<div class="row align-items-center justify-content-between">
    <div class="col-12 col-sm-12 page-title">
        <h3>{{'Niveles por empresas' |trans}}</h3>
    </div>
</div>
<div class="row">
    <div class="col-sm-16">
        <div class="card">
            <div class="card-header"  style=" background: linear-gradient(to right, #d5ff00 0%, #A3C300 100%); ">
                <h5 class="card-title">{{ 'Subir Archivo de Niveles' |trans}} {{ empresa.nombre }}</h5>
            </div>
            <div class="card-block" style=" padding-bottom:45px; ">
                <div class="row">
                    <form id="form" name="form" action="{{ path('_usuario', { 'usuario_id': usuario.id }) }}" class="container-fluid p-0" method="POST">
                        <input type="hidden" id="url_niveles" name="url_niveles" value="{{ path('_ajaxNiveles') }}">
                        <div class="col-sm-4 col-md-4 col-lg-4">
                            <div class="form-group">
                                <label for="correo_corporativo" class="col-sm-16 col-md-16 col-lg-16 col-form-label">{{ 'Correo corporativo'|trans }}</label>
                                <div class="col-sm-16 col-md-16 col-lg-16">
                                    <input type="email" class="form-control form_sty1" name="correo_corporativo" id="correo_corporativo" value="{{ usuario.correoCorporativo }}">
                                    <span class="fa fa-envelope"></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-md-4 col-lg-4 justify-content-start">
                            <label for="pais_id" class="col-sm-2 col-md-2 col-lg-2 col-form-label">{{ 'País'|trans }}</label>
                            <div class="col-sm-16 col-md-16 col-lg-16">
                                <select class="form-control form_sty_select" name="pais_id" id="pais_id">
                                    <option value=""></option>
                                    {% for pais in paises %}
                                        {% set selected = usuario.pais.id == pais.id ? 'selected="selected"' : '' %}
                                        <option value="{{ pais.id }}" {{ selected }} >{{ pais.nombre|trim }}</option>
                                    {% endfor %}
                                </select>
                                <span class="fa fa-globe"></span>
                            </div>
                        </div>
                        <div class="col-sm-4 col-md-4 col-lg-4">
                            <div class="form-group">
                                <label for="ciudad" class="col-sm-6 col-md-6 col-lg-6 col-form-label">{{ 'Ciudad'|trans }}</label>
                                <div class="col-sm-16 col-md-16 col-lg-16">
                                    <input type="text" class="form-control form_sty1" name="ciudad" id="ciudad" value="{{ usuario.ciudad }}">
                                    <span class="fa fa-map-marker"></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 col-md-4 col-lg-4">
                            <div class="form-group">
                                <label for="region" class="col-sm-6 col-md-6 col-lg-6 col-form-label">{{ 'Región'|trans }}</label>
                                <div class="col-sm-16 col-md-16 col-lg-16">
                                    <input type="text" class="form-control form_sty1" name="region" id="region" value="{{ usuario.region }}">
                                    <span class="fa fa-map-signs"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block formModal %}
<div class="modal-header" style="background: linear-gradient(to right, #0084db 0%, #00558D 100%); color: #fff;">
    <h5 class="modal-title" id="exampleModalLongTitle">{{ 'Nuevo nivel de la empresa'|trans }} <span id="header-empresa"></span></h5>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true" style="color: #fff;">&times;</span>
    </button>
</div>
<div class="modal-body">
    <form id="form" name="form" action="{{ path( '_ajaxUpdateNivel')}}" method="POST">
        <input type="hidden" id="empresa_id" name="empresa_id" value="">
        <div class="form-group">
            <label for="recipient-name" class="form-control-label">{{ 'Nivel'|trans }}:</label>
            <input type="text" class="form-control form_sty_modal" id="nombre" name="nombre" value="">
            <span class="fa fa-cube"></span>
        </div>
    </form>
</div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="{{ asset('jq/jquery-validation-1.15.0/dist/jquery.validate.js') }}"></script>
    <script type="text/javascript" src="{{ asset('assets/vendor/jstree/dist/jstree.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('js/admin/empresasNiveles.js') }}"></script>
    <script type="text/javascript">

        $("#form").validate({
            rules: {
                'nombre': {
                    required: true,
                    minlength: 3
                }
            },
            messages: {
                'nombre': {
                    required: "{{ 'Este campo es requerido.'|trans }}",
                    minlength: "{{ 'Debe ser mínimo de 3 caracteres.'|trans }}"
                }
            }
        });

        
    </script>
{% endblock %}