{% extends '::'~app.session.get('empresa').plantilla %}

{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('front/js/plugins/mediaelement-4.2.8/build/mediaelementplayer.min.css') }}" rel="stylesheet">
{% endblock %}

{% block body %}

{% if biblioteca.TipoBiblioteca.id == '1' %}
<div class="container-fluid">
    <div class="row mt-4">
        <div class="col-12 text-center">
            <h3>Biblioteca</h3>
        </div>
    </div>
    <div class="row mt-3">
        <div class="col-12 text-center">
            <h3 class="subtitulo-recurso">{{biblioteca.titulo}}</h3>
        </div>
    </div>
    <div class="biblio_detalle-recurso">
        <div class="row justify-content-between">
            <div class="col-8 col-md-8 col-sm-8 col-xl-8 col-lg-8 col-xs-8 text-center">
                <video
                       class="video-js vjs-fluid my-player"
                       controls
                       preload="auto"
                       {% set img = uploads~biblioteca.imagen %}
                       poster="{{img}}"
                       data-setup='{"playbackRates": [1, 1.5, 2], "fluid": true, "controlBar": { "muteToggle": false }}'>
                       {% set video = uploads~biblioteca.pdf %}
                    <source src="{{video}}"></source>
                </video>
            </div>
            <div class="col-4">
                <div class="row justify-content-between">
                    <div class="col-auto">
                        <h4 class="sub-line">Título</h4>
                    </div>
                    <div class="col-12 text-justify">
                        <h5 class="tituloTextRecurso">{{biblioteca.titulo}}</h5>
                    </div>
                </div>
                <div class="row mt-3 justify-content-between">
                    <div class="col-auto">
                        <h4 class="sub-line">Fecha de creación</h4>
                    </div>
                    <div class="col-12">
                        <p class="textRecurso">{{ biblioteca.fechapublicacion|date("d-m-Y") }}</p>
                    </div>
                </div>
                <div class="row mt-2 justify-content-between">
                    <div class="col-auto">
                        <h4 class="sub-line">Descripción</h4>
                    </div>
                    <div class="col-12 text-justify">
                        <p class="textRecurso">{{biblioteca.contenido|raw}}
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-3 align-items-center justify-content-end">
            <div class="col-6 col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xl-6 text-right">
                <a href="{{ path('_biblioteca') }}" class="lk-volver"><span class="material-icons ic-bck">arrow_back</span>Volver a biblioteca</a>
            </div>
        </div>
        {% if videos %}
            <div class="biblio_detalle-catag">
                <div class="row">
                    <div class="col-12 col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                        <h4 class="mt-3 pt-3 mb-0 pb-1 title-grey sub-line ">Contenido Relacionado</h4>
                    </div>
                </div>
                <div class="row">
                    <div class="cards-section container d-flex justify-content-between justify-content-sm-center flex-wrap mt-3">
                        {% for video in videos %}
                            <div class="col-4 col-lg-4 col-xl-4 col-md-6 col-sm-6 col-xs-6">
                                <a href="{{ path('_bibliotecaDetalle',  { 'biblioteca_id': video.id}) }}">
                                    <div class="card_biblio">
                                        <div class="card_biblio-left">
                                            <span class="material-icons ic-recurso">video_library</span>
                                        </div>
                                        <div class="card_biblio-right">
                                            <div class="row">
                                                <div class="col-12">
                                                    <h5 class="titulo_recurso">{{video.titulo}}</h5>
                                                </div>
                                                <div class="col-12 text-right pos-recurso">
                                                    <span class="tipo_recurso">video</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        {% endif %}
    </div>
</div>
{% elseif biblioteca.TipoBiblioteca.id == '2' %}
<div class="container-fluid">
    <div class="row mt-4">
        <div class="col-12 text-center">
            <h3>Biblioteca</h3>
        </div>
    </div>
    <div class="row mt-3">
        <div class="col-12 text-center">
            <h3 class="subtitulo-recurso">{{biblioteca.titulo}}</h3>
        </div>
    </div>
    <div class="biblio_detalle-recurso">
        <div class="row justify-content-center">
            <div class="col-4">
                <div class="row justify-content-between">
                    <div class="col-auto">
                        <h4 class="sub-line">Título</h4>
                    </div>
                    <div class="col-12 text-justify">
                        <h5 class="tituloTextRecurso">{{biblioteca.titulo}}l</h5>
                    </div>
                </div>
                <div class="row mt-3 justify-content-between">
                    <div class="col-auto">
                        <h4 class="sub-line">Fecha de creación</h4>
                    </div>
                    <div class="col-12">
                        <p class="textRecurso">{{biblioteca.fechapublicacion|date("d-m-Y")}}</p>
                    </div>
                </div>
            </div>
            <div class="col-4">
                <div class="row justify-content-between">
                    <div class="col-auto">
                        <h4 class="sub-line">Descripción</h4>
                    </div>
                    <div class="col-12 text-justify">
                        <p class="textRecurso">{{biblioteca.contenido|raw}}
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-3 justify-content-center">
            <div class="col-8 col-md-8 col-sm-8 col-xl-8 col-lg-8 col-xs-8 text-center">
                <div class="audio-player">
                    <img src="{{asset('img/Podcast.jpg')}}" alt="">
                    {% set audio = uploads~biblioteca.pdf %}
                    <audio class="audioP" src="{{audio}}" type="audio/mp3" controls="controls"></audio>
                </div>
            </div>
        </div>
        <div class="row mt-3 align-items-center justify-content-end">
            <div class="col-6 col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xl-6 text-right">
                <a href="{{ path('_biblioteca') }}" class="lk-volver"><span class="material-icons ic-bck">arrow_back</span>Volver a biblioteca</a>
            </div>
        </div>
        {% if audios %}
            <div class="biblio_detalle-catag">
                <div class="row">
                    <div class="col-12 col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                        <h4 class="mt-3 pt-3 mb-0 pb-1 title-grey sub-line ">Contenido Relacionado</h4>
                    </div>
                </div>
                <div class="row">
                    <div class="cards-section container d-flex justify-content-between justify-content-sm-center flex-wrap mt-3">
                        {% for audio in audios %}
                            <div class="col-4 col-lg-4 col-xl-4 col-md-6 col-sm-6 col-xs-6">
                                <a href="{{ path('_bibliotecaDetalle',  { 'biblioteca_id': audio.id}) }}">
                                    <div class="card_biblio">
                                        <div class="card_biblio-left">
                                            <span class="material-icons ic-recurso">mic</span>
                                        </div>
                                        <div class="card_biblio-right">
                                            <div class="row">
                                                <div class="col-12 col-lg-12 col-xl-12 col-md-12 col-sm-12 col-xs-12">
                                                    <h5 class="titulo_recurso">{{audio.titulo}}</h5>
                                                </div>
                                                <div class="col-12 col-lg-12 col-xl-12 col-md-12 col-sm-12 col-xs-12 text-right pos-recurso">
                                                    <span class="tipo_recurso">Podcast</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        {% endif %}
    </div>
</div>
{% elseif biblioteca.TipoBiblioteca.id in ['3','4']  %}
<div class="container-fluid">
    <div class="row mt-4">
        <div class="col-12 text-center">
            <h3>Biblioteca</h3>
        </div>
    </div>
    <div class="row mt-3 justify-content-center">
        <div class="col-12 text-center">
            <h3 class="subtitulo-recurso">{{biblioteca.titulo}}</h3>
        </div>
    </div>
    <div class="biblio_detalle-recurso">
        <div class="row mt-3">
            <div class="col-6">
                <div class="row justify-content-center">
                    <div class="col-8 text-center">
                        {% set img = uploads~biblioteca.imagen %}
                        <img src="{{img}}" alt="" class="img-recurso">
                    </div>
                    <div class="col-8 mt-6 text-center">
                        {% set pdf = uploads~biblioteca.pdf %}
                        <a href="{{pdf}}" target="_blank" ><button type="button" class="btn btn-primary">Descargar</button></a>
                    </div>
                </div>
            </div>
            <div class="col-6">
                <div class="row justify-content-between">
                    <div class="col-auto">
                        <h4 class="sub-line">Título</h4>
                    </div>
                    <div class="col-12">
                        <h5 class="tituloTextRecurso">{{biblioteca.titulo}}</h5>
                    </div>
                </div>
                <div class="row mt-3 justify-content-between">
                    <div class="col-auto">
                        <h4 class="sub-line">Autor</h4>
                    </div>
                    <div class="col-12">
                        <p class="textRecurso">{{biblioteca.autor}}</p>
                    </div>
                </div>
                <div class="row mt-3 justify-content-between">
                    <div class="col-auto">
                        <h4 class="sub-line">fecha de creación</h4>
                    </div>
                    <div class="col-12">
                        <p class="textRecurso">{{biblioteca.fechapublicacion|date("d-m-Y")}}</p>
                    </div>
                </div>
                <div class="row mt-3 justify-content-between">
                    <div class="col-auto">
                        <h4 class="sub-line">Descripción</h4>
                    </div>
                    <div class="col-12 text-justify">
                        <p class="textRecurso">
                            {{biblioteca.contenido|raw}}
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-3 align-items-center justify-content-end">
            <div class="col-6 col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xl-6 text-right">
                <a href="#" class="lk-volver"><span class="material-icons ic-bck">arrow_back</span>Volver a biblioteca</a>
            </div>
        </div>
        {% if pdfs %}
        <div class="biblio_detalle-catag">
            <div class="row">
                <div class="col-12 col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                    <h4 class="mt-3 pt-3 mb-0 pb-1 title-grey sub-line ">Contenido Relacionado</h4>
                </div>
            </div>
            <div class="row">
                <div class="cards-section container d-flex justify-content-between justify-content-sm-center flex-wrap mt-3">
                    {% for pdf in pdfs %}
                    {% if pdf.tipoBiblioteca.id == '3' %}
                        <div class="col-4 col-lg-4 col-xl-4 col-md-6 col-sm-6 col-xs-6">
                            <a href="{{ path('_bibliotecaDetalle',  { 'biblioteca_id': pdf.id}) }}">
                                <div class="card_biblio">
                                    <div class="card_biblio-left">
                                        <span class="material-icons ic-recurso">note</span>
                                    </div>
                                    <div class="card_biblio-right">
                                        <div class="row">
                                            <div class="col-12 col-lg-12 col-xl-12 col-md-12 col-sm-12 col-xs-12">
                                                <h5 class="titulo_recurso">{{pdf.titulo}}</h5>
                                            </div>
                                            <div class="col-12 col-lg-12 col-xl-12 col-md-12 col-sm-12 col-xs-12 text-right pos-recurso">
                                                <span class="tipo_recurso">Artículo</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>
                    {% else %}
                        <div class="col-4 col-lg-4 col-xl-4 col-md-6 col-sm-6 col-xs-6">
                            <a href="{{ path('_bibliotecaDetalle',  { 'biblioteca_id': pdf.id}) }}">
                                <div class="card_biblio">
                                    <div class="card_biblio-left">
                                        <span class="material-icons ic-recurso">book</span>
                                    </div>
                                    <div class="card_biblio-right">
                                        <div class="row">
                                            <div class="col-12 col-lg-12 col-xl-12 col-md-12 col-sm-12 col-xs-12">
                                                <h5 class="titulo_recurso">{{pdf.titulo}}</h5>
                                            </div>
                                            <div class="col-12 col-lg-12 col-xl-12 col-md-12 col-sm-12 col-xs-12 text-right pos-recurso">
                                                <span class="tipo_recurso">Libro</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>
                    {% endif%}
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endif %}
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="{{ asset('front/js/plugins/mediaelement-4.2.8/build/mediaelement-and-player.min.js') }}"></script> 
    <script>
        document.oncontextmenu = function(){return false;}
        $(document).ready(function() {
            $('.audioP').mediaelementplayer({
                alwaysShowControls: true,
                features: ['playpause','volume','progress','current','duration'],
                audioVolume: 'vertical',
                audioWidth: "100%",
                audioHeight: 40
            });
            $('#biBlio').addClass("active");
        });
    </script>
{% endblock %}